<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>PVE: Virtualization for Work and Play (Part 2) - Roobyz Ramblings</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="PVE: Virtualization for Work and Play (Part 2)">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="PVE: Virtualization for Work and Play (Part 2)">
    <meta property="og:description" content="">

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="//roobyz.github.io/themes/runoz/assets/css/uno.css?v=1495159267798" />

    <link rel="canonical" href="https://roobyz.github.io/2017/04/25/Server-Virtualization-Management-Part2.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Roobyz Ramblings" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="PVE: Virtualization for Work and Play (Part 2)" />
    <meta property="og:description" content="Getting Started&amp;#8230;&amp;#8203; In the previous post, we learned about ProxMox Virtual Environment (PVE) and outlined the plan to build a powerful &quot;bang for the buck&quot; home server for games and other system-intensive pursuits. Before proceeding, you should feel a little comfortable with the Linux CLI (command line interface)" />
    <meta property="og:url" content="https://roobyz.github.io/2017/04/25/Server-Virtualization-Management-Part2.html" />
    <meta property="article:published_time" content="2017-04-25T00:00:00.000Z" />
    <meta property="article:tag" content="Blog" />
    <meta property="article:tag" content="Open_Source" />
    <meta property="article:tag" content="Technology" />
    <meta property="article:tag" content="ProxMox" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="PVE: Virtualization for Work and Play (Part 2)" />
    <meta name="twitter:description" content="Getting Started&amp;#8230;&amp;#8203; In the previous post, we learned about ProxMox Virtual Environment (PVE) and outlined the plan to build a powerful &quot;bang for the buck&quot; home server for games and other system-intensive pursuits. Before proceeding, you should feel a little comfortable with the Linux CLI (command line interface)" />
    <meta name="twitter:url" content="https://roobyz.github.io/2017/04/25/Server-Virtualization-Management-Part2.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Roobyz Ramblings",
    "author": {
        "@type": "Person",
        "name": "Roberto Rivera",
        "image": "https://avatars2.githubusercontent.com/u/8206288?v=3",
        "url": "https://roobyz.github.io/author/roobyz/",
        "description": "Data scientist and developer with a passion for diving into data, generating insights, and collaborating with others. "
    },
    "headline": "PVE: Virtualization for Work and Play (Part 2)",
    "url": "https://roobyz.github.io/2017/04/25/Server-Virtualization-Management-Part2.html",
    "datePublished": "2017-04-25T00:00:00.000Z",
    "keywords": "Blog, Open_Source, Technology, ProxMox",
    "description": "Getting Started&amp;#8230;&amp;#8203; In the previous post, we learned about ProxMox Virtual Environment (PVE) and outlined the plan to build a powerful &quot;bang for the buck&quot; home server for games and other system-intensive pursuits. Before proceeding, you should feel a little comfortable with the Linux CLI (command line interface)"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Roobyz Ramblings" href="https://roobyz.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">

</head>
<body class="post-template tag-Blog tag-Open-Source tag-Technology tag-Prox-Mox no-js">

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background.jpg)">
      <div class="panel-main">
    
        <div class="panel-main__inner panel-inverted">
        <div class="panel-main__content">
    
            <a href="https://roobyz.github.io" title="link to homepage for Roobyz Ramblings"><img src="/images/user_pic.jpg" width="80" alt="Roobyz Ramblings logo" class="panel-cover__logo logo" /></a>
            <h1 class="panel-cover__title panel-title"><a href="https://roobyz.github.io" title="link to homepage for Roobyz Ramblings">Roobyz Ramblings</a></h1>
            <hr class="panel-cover__divider" />
            <p class="panel-cover__description">A responsive site for sharing thoughts and lessons learned on data science, programming, and technology.</p>
            <hr class="panel-cover__divider panel-cover__divider--secondary" />
    
            <div class="navigation-wrapper">
    
              <nav class="cover-navigation cover-navigation--primary">
                <ul class="navigation">
                  <li class="navigation__item"><a href="https://roobyz.github.io/#blog" title="link to Roobyz Ramblings blog" class="blog-button">Blog</a></li>
                </ul>
              </nav>
    
              
              
              <nav class="cover-navigation navigation--social">
                <ul class="navigation">
              
              
              
              
                  <!-- Github -->
                  <li class="navigation__item">
                    <a href="https://github.com/roobyz" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="navigation__item">
                    <a href=" https://linkedin.com/in/robertoriveraz" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
              
                </ul>
              </nav>
              
    
            </div>
    
          </div>
    
        </div>
    
        <div class="panel-cover--overlay"></div>
      </div>
    </header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="25 Apr 2017" class="post-meta__date date">25 Apr 2017</time> &#8226; <span class="post-meta__tags tags">on <a href="https://roobyz.github.io/tag/Blog/">Blog</a>, <a href="https://roobyz.github.io/tag/Open-Source/">Open_Source</a>, <a href="https://roobyz.github.io/tag/Technology/">Technology</a>, <a href="https://roobyz.github.io/tag/Prox-Mox/">ProxMox</a></span>
        <span class="post-meta__author author"><img src="https://avatars2.githubusercontent.com/u/8206288?v&#x3D;3" alt="profile image for Roberto Rivera" class="avatar post-meta__avatar" /> by Roberto Rivera</span>
      </div>
      <h1 class="post-title">PVE: Virtualization for Work and Play (Part 2)</h1>
    </header>

    <section class="post tag-Blog tag-Open-Source tag-Technology tag-Prox-Mox">
      <div class="sect1">
<h2 id="_getting_started">Getting Started&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="/2017/04/23/Server-Virtualization-Management.html">previous post</a>, we learned about ProxMox Virtual Environment (PVE) and outlined the plan to build a powerful "bang for the buck" home server for games <em>and</em> other system-intensive pursuits. Before proceeding, you should feel a little comfortable with the <a href="http://linuxcommand.org/lc3_learning_the_shell.php" target="_blank">Linux CLI (command line interface)</a>. Now let&#8217;s begin.</p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_getting_started">Getting Started&#8230;&#8203;</a></li>
<li><a href="#_installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#_pve_drive_options">PVE Drive Options</a></li>
<li><a href="#_zfs_partitions">ZFS Partitions</a></li>
<li><a href="#_zfs_setup">ZFS Setup</a></li>
</ul>
</li>
<li><a href="#_post_installation">Post-Installation</a>
<ul class="sectlevel2">
<li><a href="#_adjusting_the_pve_repositories">Adjusting the PVE Repositories</a></li>
<li><a href="#_update_pve">Update PVE</a></li>
<li><a href="#_update_the_pve_storage_system">Update the PVE Storage System:</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://pve.proxmox.com/wiki/Quick_installation" target="_blank">PVE Quick Installation</a> guide does a wonderful job of highlighting the key installation points and showing how simple the process really is. If you follow the defaults settings, PVE will install to <em>local disks</em> and should take about 10 minutes or less. If you have a large single drive that you want to use, then you can skip to the post-installation section below since that guide is all that you would need.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>PVE Installation Process
<span class="image"><img src="https://roobyz.github.io/images/Server-Virtualization-Management/pve-installation.gif" alt="pve-install"></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_pve_drive_options">PVE Drive Options</h3>
<div class="paragraph">
<p>For our setup, we will disconnect all the drives except for our boot drive, and follow most of the default installation options with one exception. Since we only want to use half of the boot drive (512Gb NVMe) our <em>hard disk options</em> are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>ext4</code></strong> <em>filesystem</em>: Standard Linux filesystem is the safe bet.</p>
</li>
<li>
<p><strong><code>176.0</code></strong> <em>hdsize</em>: Shooting for half of our 512Gb. The following values should add up to 256Gb. Equal to 256Gb-80Gb (minfree).</p>
</li>
<li>
<p><strong><code>64.0</code></strong> <em>swapsize</em>: Linux swap file size (equal to our ram size). Be sure to set vm.swappiness to a low value if you have your swap file on an SSD! It&#8217;ll increase RAM usage a bit, but will be easier on our SSD.</p>
</li>
<li>
<p><strong><code>96.0</code></strong> <em>maxroot</em>: / root file partition</p>
</li>
<li>
<p><strong><code>80.0</code></strong> <em>minfree</em>: This should equal our ZFS log (16GB) plus our ZFS cache (64GB).</p>
</li>
<li>
<p><strong><code>16.0</code></strong> <em>maxve</em>: This is the pve-data partition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you get to the <em>Installation Successful</em> step of the PVE install, click the "Reboot" button.</p>
</div>
</div>
<div class="sect2">
<h3 id="_zfs_partitions">ZFS Partitions</h3>
<div class="paragraph">
<p>After rebooting you can log in via the PVE Web GUI or through the command line using SSH. Logging in via ssh:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>ssh root@10.10.1.10

#The authenticity of host '10.10.1.10 (10.10.1.10)' can't be established.
#ECDSA key fingerprint is SHA256:2ExP+SHaCo+9ZOt+sk90DPLAafdHFJTHPyeU1qtFXIg.
#Are you sure you want to continue connecting (yes/no)?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type "yes" and then enter the password set during installation.</p>
</div>
<div class="paragraph">
<p>After logging into our new PVE installation, we want to add two additional partitions (ZFS Log (16Gb), and ZFS Cache(64Gb)). The combined storage will be 256Gb, leaving us with half of our NVMe for other options like dual-boot, additional storage, etc.</p>
</div>
<div class="paragraph">
<p>After logging in, run (update for your drive): <code>cfdisk /dev/sda</code></p>
</div>
<div class="paragraph">
<p>Go down to the "free space" line in green and add a 16Gb partition. Move down again to the next "free space" line in green and add a 64Gb partition. Then select <code>write</code> and then select <code>quit</code> and we are done.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Creating ZFS Log and Cache Partitions
<span class="image"><img src="https://roobyz.github.io/images/Server-Virtualization-Management/pve-cfdisk-process.gif" alt="pve-cfdisk"></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once these two partitions are added, we can shut down PVE from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>shutdown -h</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_zfs_setup">ZFS Setup</h3>
<div class="paragraph">
<p>Once PVE has shut down, we can reconnect the remaining drives and restart our system. Before setting up our ZFS storage, we must backup any data that we want to keep.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start our <a href="http://open-zfs.org/wiki/Performance_tuning" target="_blank">ZFS configuration</a>. As mentioned in our previous post, we are configuring ZFS as striped-mirrored storage. Since we have a 2TB spinning disk that we want to use for backup, we will mirror it as an <em>automatic</em> backup.</p>
</div>
<div class="paragraph">
<p>Our drives should all be the same size, otherwise, we will lose storage capacity. Since our SSD drives are 1TB each, we need to partition our 2TB spinning disk to two 1TB partitions. Before partitioning, identify the correct drives; run <code>lsblk</code> to get the list of block devices:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>List of block devices
<span class="image"><img src="https://roobyz.github.io/images/Server-Virtualization-Management/pve-lsblk.png" alt="pve-lsblk"></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In my example, the 2TB (1.8T) drive is <code>/dev/sdc</code>. The following commands will replace the drive with a new GPT partition table and create the 2 partitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Install parted
apt-get install parted

# remove everything on the /dev/sdc drive and
# replace with two empty equal-sized partitions
parted /dev/sdc --script mklabel gpt \
       mkpart primary 0% 50% \
       mkpart primary 50% 100% p</code></pre>
</div>
</div>
<div class="paragraph">
<p>After partitioning, we can mirror and stripe the drives. When we create the drive mirrors, ZFS creates virtual devices (vdevs). We can then connect the vdevs together into zpools. For example, we can <em>mirror</em> two 1TB drives and we end up with a 1TB vdev that will automatically replicate our data across both drives. Then we combine the two 1TB mirrored vdevs and end up with 2TB of storage.</p>
</div>
<div class="paragraph">
<p>Since the zpool read/write transactions are balanced across the two vdevs, we can actually get an increase in drive performance with the transactions happening in parallel across two physical drives. We can also compress the read-write transactions on the zpool. Because our CPU can compress-decompress data much faster than the drives can read-write data, our drive performance can improve even more, because of the smaller size of the read-write transactions on the zpool.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># Creating our ZFS mirrored storage pool
zpool create -o ashift=12 tank \
      mirror /dev/sda /dev/sdc1 \
      mirror /dev/sdb /dev/sdc2 \
      log   /dev/nvm0n1p4 \
      cache /dev/nvm0n1p5</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Creating our ZFS Storage Pool</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>zpool create -o ashift=12 tank \</p>
</li>
<li>
<p>mirror /dev/sda /dev/sdc1 \</p>
</li>
<li>
<p>mirror /dev/sdb /dev/sdc2 \</p>
</li>
<li>
<p>log   /dev/nvm0n1p4 \</p>
</li>
<li>
<p>cache /dev/nvm0n1p5</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>pool called tank with 4k sectors</p>
</li>
<li>
<p>first vdev</p>
</li>
<li>
<p>second vdev</p>
</li>
<li>
<p>16GB log partition</p>
</li>
<li>
<p>64GB cache partition</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>zfs set compression=lz4 tank  # lz4 pool compression
zfs create tank/vm-disks      # ZFS layer to store VM images</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once that&#8217;s done, we can run the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>zpool list          # verify that our pool has been created
zpool status tank   # check pool status and configuration
pvesm zfsscan       # list available ZFS file systems</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_post_installation">Post-Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The PVE open-source license allows for testing and non-production use. If we would like to use PVE for production or we want commercial support, we can purchase a subscription, enter our key through the web interface, and skip to the "Update PVE" section.</p>
</div>
<div class="sect2">
<h3 id="_adjusting_the_pve_repositories">Adjusting the PVE Repositories</h3>
<div class="paragraph">
<p>The <a href="https://pve.proxmox.com/wiki/Package_Repositories" target="_blank">PVE Package Repositories</a> can be configured depending on your usage goals. Let&#8217;s include the non-commercial list of repositories.</p>
</div>
<div class="paragraph">
<p>Run <code>nano /etc/apt/sources.list</code> and update as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># main debian repo
deb http://ftp.us.debian.org/debian stretch main contrib

# security updates
deb http://security.debian.org stretch/updates main contrib</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save and exit: press CTRL+X, Y for yes, and ENTER.</p>
</div>
<div class="paragraph">
<p>Comment-out the PVE commercial repository.</p>
</div>
<div class="paragraph">
<p>Run <code>nano /etc/apt/sources.list.d/pve-enterprise.list</code> and update as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code># non-subscription repo (manual update)
deb http://download.proxmox.com/debian/pve stretch pve-no-subscription
#deb https://enterprise.proxmox.com/debian/pve stretch pve-enterprise</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save and exit: press CTRL+X, Y for yes, and ENTER.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_pve">Update PVE</h3>
<div class="paragraph">
<p>Edit our <em>resume</em> settings: run <code>nano /etc/initramfs-tools/conf.d/resume</code> and add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>RESUME=none</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save and exit: press CTRL+X, Y for yes, and ENTER.</p>
</div>
<div class="paragraph">
<p>Update the software packages, boot loader, and system image. From the PVE, command line type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>apt-get update &amp;&amp; apt-get upgrade -y
update-grub
update-initramfs -u</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update_the_pve_storage_system">Update the PVE Storage System:</h3>
<div class="paragraph">
<p>Once we create our ZFS storage, we can go to the PVE Web GUI and add it to our setup. Being sure to use <em>HTTPS</em>, open <a href="https://machine-ip-address:8006" class="bare">https://machine-ip-address:8006</a> in a web browser. When we get the <em>certificate warning</em> message, we should proceed anyway. This happens because the machine does not have a certificate signed by a third party. Our goal is to end up with four storage volumes:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. PVE storage volumes.</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 72.7273%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>vm-disks</p>
</li>
<li>
<p>zfs-backups</p>
</li>
<li>
<p>zfs-containers</p>
</li>
<li>
<p>zfs-templates</p>
</li>
</ol>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>Stores RAW disk images more efficiently</p>
</li>
<li>
<p>Stores VZDump backups of virtual machines</p>
</li>
<li>
<p>Stores LXC container filesystems</p>
</li>
<li>
<p>Stores ISOs and container templates</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once logged in, we go to Datacenter &gt; Storage, and:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>click <strong>Add</strong> &gt; <strong>ZFS</strong>, then enter "<strong><em>vm-disks</em></strong>" for ID, and select <em>tank/vm-disks</em> for pool, choose only <em>Disk Image</em> for content, and finally tick the <em>Thin Provision</em> checkbox and select <strong>Add</strong>.</p>
</li>
<li>
<p>click <strong>Add</strong> &gt; <strong>ZFS</strong>, then enter "<strong><em>zfs-containers</em></strong>" for ID, and select <em>tank</em> for pool, and <em>Container</em> for content, and select <strong>Add</strong>.</p>
</li>
<li>
<p>click <strong>Add</strong> &gt; <strong>Directory</strong>, then enter "<strong><em>zfs-backups</em></strong>" for ID, enter "<em>/tank</em>" (/our-zfs-pool) for directory, and choose only <em>VZDump backup files</em> for content, then select <strong>Add</strong>.</p>
</li>
<li>
<p>click <strong>Add</strong> &gt; <strong>Directory</strong>, then enter "<strong><em>zfs-templates</em></strong>" for ID, enter "<em>/tank</em>" (/our-zfs-pool) for directory, and choose both <em>container templates</em> and <em>ISO images</em> for content, then select <strong>Add</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After adding our new storage options, we can disable the local storage:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>select <strong>local-lvm</strong>, click <strong>Edit</strong>, untick the <em>Enable</em> checkbox, and click "OK".</p>
</li>
<li>
<p>select <strong>local</strong>, click <strong>Edit</strong>, untick the <em>Enable</em> checkbox, add "1" for <em>Max Backups</em>, and then click "OK".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Afterward, if we select the arrow next to pve in the <em>Server View</em>, we will only see only four enabled storage options.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>PVE Storage Volume Setup
<span class="image"><img src="https://roobyz.github.io/images/Server-Virtualization-Management/pve-zfs-setup.gif" alt="pve-zfs-setup"></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We made it! With only one storage volume for each type of content, there&#8217;s no way to accidentally misplace something. Creating containers and VMs should function as expected.</p>
</div>
<div class="paragraph">
<p>Our machine is ready to go, however this is only part 2 of our multipart tutorial. Our next installment will cover some opportunities for <em>System Optimization</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/2017/05/03/Server-Virtualization-Management-Part3.html">Part 3: System Optimization</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
    </section>

  </article>

  
  <section class="post-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'roobyzramblings'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
  



            <footer class="footer">
                <span class="footer__copyright">&copy; 2017. All rights reserved.</span>
                <span class="footer__copyright"><a href="http://uno.daleanthony.com" title="link to page for Uno Ghost theme">Uno theme</a> by <a href="http://daleanthony.com" title="link to website for Dale-Anthony">Dale-Anthony</a></span>
                <span class="footer__copyright">Proudly published with <a href="http://hubpress.io" title="link to Hubpress website">Hubpress</a></span>
            </footer>
        </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
       
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <script type="text/javascript" src="//roobyz.github.io/themes/runoz/assets/js/main.js?v=1495159267798"></script>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53332527-1', 'auto');
    ga('send', 'pageview');

    </script>

</body>
</html>
